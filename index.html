<!DOCTYPE html>

<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brackets Tracker</title>
    <link rel="apple-touch-icon" href="icon-180.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body{background:linear-gradient(135deg,#0f172a,#1e293b);color:#fff;font-family:-apple-system,sans-serif;min-height:100vh}
        .molar-happy{animation:bounce 2s infinite}
        @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
        .floating{animation:float 3s ease-in-out infinite}
        @keyframes float{0%,100%{transform:translateY(0) rotate(0)}50%{transform:translateY(-15px) rotate(5deg)}}
        .tab-active{background:linear-gradient(135deg,#667eea,#764ba2)}
        .card{transition:all .3s;cursor:pointer}
        .card:hover{transform:translateY(-5px)}
        .r-common{border-color:#9ca3af}
        .r-rare{border-color:#3b82f6}
        .r-epic{border-color:#a855f7}
        .r-legendary{border-color:#eab308;animation:glow 2s infinite}
        @keyframes glow{0%,100%{box-shadow:0 0 20px rgba(234,179,8,.5)}50%{box-shadow:0 0 30px rgba(234,179,8,.8)}}
        .sparkle{animation:sparkle 2s infinite}
        @keyframes sparkle{0%,100%{opacity:.5;transform:scale(1)}50%{opacity:1;transform:scale(1.2)}}
    </style>
</head>
<body>
    <div id="app" class="max-w-md mx-auto p-4 pb-24"></div>
    <nav class="fixed bottom-0 left-0 right-0 bg-gray-900/95 backdrop-blur border-t border-gray-800 z-50">
        <div class="max-w-md mx-auto flex justify-around py-3">
            <button onclick="changePage('home')" class="flex flex-col items-center gap-1 px-4 py-2 rounded-lg transition" id="tab-home">
                <span class="text-2xl">ğŸ </span><span class="text-xs font-semibold">Inicio</span>
            </button>
            <button onclick="changePage('closet')" class="flex flex-col items-center gap-1 px-4 py-2 rounded-lg transition" id="tab-closet">
                <span class="text-2xl">ğŸ‘”</span><span class="text-xs font-semibold">Armario</span>
            </button>
            <button onclick="changePage('shop')" class="flex flex-col items-center gap-1 px-4 py-2 rounded-lg transition" id="tab-shop">
                <span class="text-2xl">ğŸ›ï¸</span><span class="text-xs font-semibold">Tienda</span>
            </button>
        </div>
    </nav>
    <script>
const DB=[{i:1,n:'Gorra Roja',c:'hat',r:'common',p:30},{i:2,n:'Sombrero Cowboy',c:'hat',r:'rare',p:50},{i:3,n:'Corona de Oro',c:'hat',r:'legendary',p:100},{i:4,n:'Chistera Negra',c:'hat',r:'epic',p:75},{i:5,n:'Gorro de Chef',c:'hat',r:'common',p:35},{i:13,n:'Sombrero de Paja',c:'hat',r:'common',p:25},{i:21,n:'Gafas de Sol',c:'glasses',r:'common',p:30},{i:22,n:'Gafas Nerd',c:'glasses',r:'common',p:25},{i:41,n:'Pajarita Roja',c:'accessory',r:'rare',p:40},{i:42,n:'Collar Perlas',c:'accessory',r:'epic',p:75},{i:43,n:'Bufanda Rayas',c:'accessory',r:'common',p:30},{i:48,n:'Alas Ãngel',c:'accessory',r:'legendary',p:150},{i:49,n:'Capa HÃ©roe',c:'accessory',r:'epic',p:90},{i:51,n:'Aura Fuego',c:'effect',r:'legendary',p:150},{i:52,n:'Lluvia Estrellas',c:'effect',r:'legendary',p:140},{i:53,n:'Destellos MÃ¡gicos',c:'effect',r:'epic',p:90}];

const COLORS=[
{i:101,n:â€˜Muela Rosaâ€™,c:â€˜colorâ€™,color:â€™#ff69b4â€™,gradient:â€˜linear-gradient(135deg, #ff69b4 0%, #ff1493 100%)â€™},
{i:102,n:â€˜Muela Doradaâ€™,c:â€˜colorâ€™,color:â€™#ffd700â€™,gradient:â€˜linear-gradient(135deg, #ffd700 0%, #ff8c00 100%)â€™},
{i:103,n:â€˜Muela Azulâ€™,c:â€˜colorâ€™,color:â€™#4169e1â€™,gradient:â€˜linear-gradient(135deg, #4169e1 0%, #1e90ff 100%)â€™},
{i:104,n:â€˜Muela Verdeâ€™,c:â€˜colorâ€™,color:â€™#32cd32â€™,gradient:â€˜linear-gradient(135deg, #32cd32 0%, #228b22 100%)â€™},
{i:105,n:â€˜Muela Moradaâ€™,c:â€˜colorâ€™,color:â€™#9370dbâ€™,gradient:â€˜linear-gradient(135deg, #9370db 0%, #8a2be2 100%)â€™},
{i:106,n:â€˜Muela Rojaâ€™,c:â€˜colorâ€™,color:â€™#dc143câ€™,gradient:â€˜linear-gradient(135deg, #dc143c 0%, #8b0000 100%)â€™},
{i:107,n:â€˜Muela Negraâ€™,c:â€˜colorâ€™,color:â€™#2f2f2fâ€™,gradient:â€˜linear-gradient(135deg, #2f2f2f 0%, #000000 100%)â€™},
{i:108,n:â€˜Muela ArcoÃ­risâ€™,c:â€˜colorâ€™,color:â€™#ff0080â€™,gradient:â€˜linear-gradient(135deg, #ff0080 0%, #ff8c00 25%, #40e0d0 50%, #9370db 75%, #ff69b4 100%)â€™},
{i:109,n:â€˜Muela Galaxiaâ€™,c:â€˜colorâ€™,color:â€™#1a1a2eâ€™,gradient:â€˜linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)â€™},
{i:110,n:â€˜Muela Fuegoâ€™,c:â€˜colorâ€™,color:â€™#ff4500â€™,gradient:â€˜linear-gradient(135deg, #ff4500 0%, #ff6347 50%, #ffa500 100%)â€™}
];

let state={streak:0,pts:0,last:null,missions:[{id:1,time:â€˜12:00â€™,done:false,label:â€˜MediodÃ­aâ€™,h:12},{id:2,time:â€˜15:00â€™,done:false,label:â€˜Tardeâ€™,h:15},{id:3,time:â€˜22:00â€™,done:false,label:â€˜Nocheâ€™,h:22}],own:[],eq:{hat:null,glasses:null,accessory:null,effect:null,color:null},music:false,page:â€˜homeâ€™,filter:â€˜allâ€™,name:â€˜Mi Muelaâ€™,clickCount:0,showSecretMenu:false,unlockedColors:[]};

const audio=new Audio(â€˜https://cdn.pixabay.com/download/audio/2021/08/04/audio_12b0c7443c.mp3â€™);
audio.loop=true;
audio.volume=0.3;

let timer;
let clickTimer;

function loadData(){
const saved=localStorage.getItem(â€˜brackets-v7â€™);
if(saved){
state={â€¦state,â€¦JSON.parse(saved)};
checkNewDay();
}
}

function saveData(){
localStorage.setItem(â€˜brackets-v7â€™,JSON.stringify(state));
}

function checkNewDay(){
const today=new Date().toDateString();
if(state.last&&state.last!==today){
const lastDate=new Date(state.last);
const todayDate=new Date(today);
const diffDays=Math.floor((todayDate-lastDate)/(1000*60*60*24));
if(diffDays>1){
state.streak=0;
}
state.missions.forEach(m=>m.done=false);
saveData();
}
}

function changePage(p){
state.page=p;
document.querySelectorAll(â€™[id^=â€œtab-â€]â€™).forEach(b=>b.classList.remove(â€˜tab-activeâ€™));
document.getElementById(â€˜tab-â€™+p).classList.add(â€˜tab-activeâ€™);
render();
if(p===â€˜homeâ€™){
startTimer();
}else{
stopTimer();
}
}

function startTimer(){
stopTimer();
timer=setInterval(()=>{
const el=document.getElementById(â€˜timerâ€™);
if(el)el.textContent=getMidnight();
},1000);
}

function stopTimer(){
if(timer)clearInterval(timer);
}

function toggleMusic(){
state.music?audio.pause():audio.play().catch(()=>{});
state.music=!state.music;
render();
}

function getTimeLeft(h){
const now=new Date();
const target=new Date();
target.setHours(h,0,0,0);
if(now>target)target.setDate(target.getDate()+1);
const diff=target-now;
const hours=Math.floor(diff/3600000);
const mins=Math.floor((diff%3600000)/60000);
return hours+â€™h â€™+mins+â€˜mâ€™;
}

function getMidnight(){
const now=new Date();
const midnight=new Date();
midnight.setHours(24,0,0,0);
const diff=midnight-now;
const h=Math.floor(diff/3600000);
const m=Math.floor((diff%3600000)/60000);
const s=Math.floor((diff%60000)/1000);
return h+â€™h â€™+m+â€™m â€™+s+â€˜sâ€™;
}

function completeMission(id){
const mission=state.missions.find(m=>m.id===id);
if(!mission.done){
mission.done=true;
state.pts+=10;
const today=new Date().toDateString();
const allDone=state.missions.every(m=>m.done);
if(allDone&&state.last!==today){
state.streak++;
state.last=today;
}
saveData();
render();
}
}

function resetStreak(){
if(confirm(â€™Â¿Reiniciar racha a 0?â€™)){
state.streak=0;
saveData();
render();
}
}

function buyItem(id){
const item=DB.find(i=>i.i===id);
if(item&&state.pts>=item.p&&!state.own.includes(id)){
state.pts-=item.p;
state.own.push(id);
saveData();
render();
}
}

function equipItem(id){
const item=DB.find(i=>i.i===id);
const color=COLORS.find(i=>i.i===id);

```
if(color){
    state.eq.color=state.eq.color===id?null:id;
    saveData();
    render();
    return;
}

if(!item||!state.own.includes(id))return;
state.eq[item.c]=state.eq[item.c]===id?null:id;
saveData();
render();
```

}

function unlockColor(id){
if(!state.unlockedColors.includes(id)){
state.unlockedColors.push(id);
state.eq.color=id;
saveData();
}
state.showSecretMenu=false;
render();
}

function handleMolarClick(){
state.clickCount++;
if(clickTimer)clearTimeout(clickTimer);

```
if(state.clickCount>=3){
    state.showSecretMenu=true;
    state.clickCount=0;
    render();
}else{
    clickTimer=setTimeout(()=>{
        state.clickCount=0;
    },1000);
}
```

}

function closeSecretMenu(){
state.showSecretMenu=false;
render();
}

function setFilter(f){
state.filter=f;
render();
}

function changeName(){
const newName=prompt(â€™Â¿CÃ³mo quieres llamar a tu muela?â€™,state.name);
if(newName&&newName.trim()){
state.name=newName.trim();
saveData();
render();
}
}

function getHatSVG(id){
if(id===1)returnâ€™<rect x="-30" y="-5" width="60" height="15" rx="3" fill="#dc2626"/><ellipse cx="0" cy="-5" rx="25" ry="8" fill="#b91c1c"/>â€™;
if(id===2)returnâ€™<path d="M-35 0Q-30-15-20-20L20-20Q30-15 35 0L30 5Q25 0 0 0Q-25 0-30 5Z" fill="#8b4513"/><ellipse cx="0" cy="0" rx="38" ry="8" fill="#654321"/>â€™;
if(id===3)returnâ€™<path d="M-25-5L-20-25L-10-30L0-35L10-30L20-25L25-5L20 0L10-5L0-3L-10-5L-20 0Z" fill="#fbbf24"/><circle cx="-12" cy="-18" r="3" fill="#ef4444" class="sparkle"/><circle cx="12" cy="-18" r="3" fill="#3b82f6" class="sparkle"/>â€™;
if(id===4)returnâ€™<ellipse cx="0" cy="5" rx="30" ry="6" fill="#1f2937"/><rect x="-15" y="-25" width="30" height="30" rx="15" fill="#111827"/>â€™;
if(id===5)returnâ€™<path d="M-25 0Q-25-20-15-25L-10-30L0-35L10-30L15-25Q25-20 25 0Z" fill="#f8f8f8"/><rect x="-3" y="-38" width="6" height="8" fill="#f8f8f8"/>â€™;
if(id===13)returnâ€™<ellipse cx="0" cy="0" rx="38" ry="10" fill="#fef3c7"/><path d="M-32 0Q-28-10-18-12L18-12Q28-10 32 0" fill="#fde68a" stroke="#f59e0b" stroke-width="2"/>â€™;
returnâ€™<ellipse cx="0" cy="0" rx="28" ry="8" fill="#6b7280"/>â€™;
}

function getAccessorySVG(id){
if(id===41)returnâ€™<ellipse cx="0" cy="0" rx="15" ry="8" fill="#dc2626"/><ellipse cx="-12" cy="0" rx="8" ry="12" fill="#b91c1c"/><ellipse cx="12" cy="0" rx="8" ry="12" fill="#b91c1c"/>â€™;
if(id===42)returnâ€™<circle cx="0" cy="-5" r="4" fill="#f8f8f8"/><circle cx="-8" cy="0" r="4" fill="#f8f8f8"/><circle cx="8" cy="0" r="4" fill="#f8f8f8"/><circle cx="-4" cy="5" r="4" fill="#f8f8f8"/><circle cx="4" cy="5" r="4" fill="#f8f8f8"/>â€™;
if(id===43)returnâ€™<rect x="-25" y="-4" width="50" height="6" fill="#dc2626"/><rect x="-25" y="2" width="50" height="6" fill="#f8f8f8"/>â€™;
if(id===48)returnâ€™<path d="M-30 0Q-25-18-10-22L-6-12L0-8L6-12L10-22Q25-18 30 0L18 10L0 6L-18 10Z" fill="#f8f8f8"/>â€™;
if(id===49)returnâ€™<path d="M-6 0L-18 22L-14 28Q-8 24 0 22Q8 24 14 28L18 22L6 0Z" fill="#dc2626"/><rect x="-8" y="-2" width="16" height="4" fill="#7c2d12"/>â€™;
returnâ€™<rect x="-15" y="0" width="30" height="8" fill="#3b82f6" rx="2"/>â€™;
}

function drawMolar(){
const happy=state.missions.filter(m=>m.done).length>=2;
const hat=state.eq.hat?DB.find(i=>i.i===state.eq.hat):null;
const accessory=state.eq.accessory?DB.find(i=>i.i===state.eq.accessory):null;
const effect=state.eq.effect?DB.find(i=>i.i===state.eq.effect):null;
const colorScheme=state.eq.color?COLORS.find(c=>c.i===state.eq.color):null;

```
const molarGradient=colorScheme?colorScheme.gradient:'linear-gradient(135deg, #fff 0%, #f5f5f5 100%)';
const molarColor=colorScheme?colorScheme.color:'#fff';

return `<div class="relative flex flex-col items-center ${happy?'molar-happy':''}">
    <button onclick="changeName()" class="mb-3 px-5 py-2 bg-purple-600 hover:bg-purple-700 rounded-full text-sm font-bold transition active:scale-95 shadow-lg">
        âœï¸ ${state.name}
    </button>
    <div class="relative" onclick="handleMolarClick()" style="cursor:pointer">
        <svg width="200" height="240" viewBox="0 0 200 240" class="drop-shadow-2xl relative z-20">
            <defs>
                <linearGradient id="tg">
                    <stop offset="0%" stop-color="${molarColor}"/>
                    <stop offset="100%" stop-color="${molarColor}" stop-opacity="0.8"/>
                </linearGradient>
                <radialGradient id="sh">
                    <stop offset="0%" stop-color="#fff" stop-opacity=".6"/>
                    <stop offset="100%" stop-color="#fff" stop-opacity="0"/>
                </radialGradient>
            </defs>
            ${effect?`<g opacity="0.5" class="floating"><ellipse cx="100" cy="120" rx="90" ry="80" fill="${effect.i===51?'#f97316':effect.i===52?'#fbbf24':'#a855f7'}" opacity="0.3"/></g>`:''}
            <ellipse cx="100" cy="220" rx="80" ry="15" fill="#000" opacity=".2"/>
            <path d="M60 40Q50 45 45 60L45 130Q45 150 55 165L70 190Q75 200 80 200Q85 210 90 210L110 210Q115 210 120 200Q125 200 130 190L145 165Q155 150 155 130L155 60Q150 45 140 40Q130 35 120 35L80 35Q70 35 60 40" fill="url(#tg)" stroke="${colorScheme?molarColor:'#e5e5e5'}" stroke-width="3" style="${colorScheme?'filter: drop-shadow(0 0 10px '+molarColor+')':''}"/>
            ${colorScheme?'':'<ellipse cx="70" cy="70" rx="25" ry="40" fill="url(#sh)"/><ellipse cx="130" cy="70" rx="25" ry="40" fill="url(#sh)"/>'}
            <path d="M75 90L85 110L75 130L65 110Z" fill="${colorScheme?molarColor:'#f0f0f0'}" stroke="${colorScheme?'none':'#ddd'}"/>
            <path d="M95 90L105 110L95 130L85 110Z" fill="${colorScheme?molarColor:'#f0f0f0'}" stroke="${colorScheme?'none':'#ddd'}"/>
            <path d="M115 90L125 110L115 130L105 110Z" fill="${colorScheme?molarColor:'#f0f0f0'}" stroke="${colorScheme?'none':'#ddd'}"/>
            <path d="M135 90L145 110L135 130L125 110Z" fill="${colorScheme?molarColor:'#f0f0f0'}" stroke="${colorScheme?'none':'#ddd'}"/>
            <g transform="translate(100,100)">
                <rect x="-35" y="-15" width="30" height="25" rx="8" fill="none" stroke="#666" stroke-width="3"/>
                <rect x="5" y="-15" width="30" height="25" rx="8" fill="none" stroke="#666" stroke-width="3"/>
                <line x1="-5" y1="-2" x2="5" y2="-2" stroke="#666" stroke-width="3"/>
            </g>
            <circle cx="75" cy="100" r="6" fill="#333"/>
            <circle cx="125" cy="100" r="6" fill="#333"/>
            ${happy?'<path d="M75 135Q100 150 125 135" stroke="#333" stroke-width="5" fill="none" stroke-linecap="round"/><circle cx="55" cy="115" r="12" fill="#ffb3ba" opacity=".6"/><circle cx="145" cy="115" r="12" fill="#ffb3ba" opacity=".6"/>':'<line x1="75" y1="135" x2="125" y2="135" stroke="#333" stroke-width="5" stroke-linecap="round"/>'}
        </svg>
        ${hat?`<div class="absolute -top-12 left-1/2 -translate-x-1/2 z-30">
            <svg width="80" height="50" viewBox="-40 -40 80 20">
                ${getHatSVG(hat.i)}
            </svg>
        </div>`:''}
        ${accessory?`<div class="absolute bottom-8 left-1/2 -translate-x-1/2 z-30">
            <svg width="80" height="40" viewBox="-40 -10 80 40">
                ${getAccessorySVG(accessory.i)}
            </svg>
        </div>`:''}
    </div>
    ${state.showSecretMenu?`
        <div class="fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4" onclick="closeSecretMenu()">
            <div class="bg-gradient-to-br from-gray-900 to-gray-800 rounded-3xl p-6 max-w-sm w-full border-2 border-purple-500 shadow-2xl" onclick="event.stopPropagation()">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-purple-400">ğŸ¨ Colores Secretos</h2>
                    <button onclick="closeSecretMenu()" class="text-2xl hover:scale-110 transition">âœ•</button>
                </div>
                <p class="text-sm text-gray-400 mb-4">Â¡Descubre colores Ãºnicos para tu muela!</p>
                <div class="grid grid-cols-2 gap-3 max-h-96 overflow-y-auto">
                    ${COLORS.map(color=>`
                        <div onclick="unlockColor(${color.i})" class="card bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-4 text-center border-2 border-purple-500 hover:border-purple-300">
                            <div class="w-16 h-16 mx-auto mb-3 rounded-full shadow-xl" style="background:${color.gradient}"></div>
                            <p class="text-xs font-bold">${color.n}</p>
                        </div>
                    `).join('')}
                </div>
            </div>
        </div>
    `:''}
</div>`;
```

}

function renderHome(){
const happy=state.missions.filter(m=>m.done).length>=2;
return `
<div class="flex justify-between items-center mb-4">
<div class="flex items-center gap-2">
<span class="text-3xl">ğŸ†</span>
<span class="text-2xl font-bold">${state.streak}</span>
<span class="text-sm text-gray-400">dÃ­as</span>
</div>
<div class="flex items-center gap-3">
<button onclick="toggleMusic()" class="p-2 bg-gray-800 rounded-full text-2xl hover:bg-gray-700 transition">
${state.music?â€˜ğŸ”Šâ€™:â€˜ğŸ”‡â€™}
</button>
<div class="flex items-center gap-2">
<span class="text-3xl">â­</span>
<span class="text-2xl font-bold">${state.pts}</span>
</div>
</div>
</div>

```
    <div class="bg-gradient-to-r from-purple-900/40 to-blue-900/40 rounded-xl p-3 mb-4 text-center border border-purple-500/30">
        <p class="text-sm text-gray-300">â° Reinicio de misiones en</p>
        <p class="text-xl font-bold text-purple-300" id="timer">${getMidnight()}</p>
    </div>
    
    <button onclick="resetStreak()" class="w-full bg-gradient-to-r from-red-600 to-red-700 text-white font-bold py-4 rounded-2xl mb-6 flex items-center justify-center gap-2 shadow-xl hover:from-red-700 hover:to-red-800 transition active:scale-95">
        <span class="text-2xl">âš ï¸</span>
        <span>Â¡Bracket caÃ­do!</span>
    </button>
    
    <div class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl p-8 mb-6 shadow-2xl">
        ${drawMolar()}
        <p class="mt-6 text-xl text-center font-bold">
            ${happy?'Â¡'+state.name+' estÃ¡ feliz! ğŸ˜Šâœ¨':'Â¡Completa tus misiones! ğŸ¦·'}
        </p>
    </div>
    
    <div class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl p-6 shadow-xl">
        <h2 class="text-2xl font-bold mb-4">â° Misiones del DÃ­a</h2>
        <div class="space-y-3">
            ${state.missions.map(m=>`
                <div class="flex items-center justify-between p-4 rounded-xl ${m.done?'bg-green-900/40 border-2 border-green-500':'bg-gray-700/50'}">
                    <div class="flex-1">
                        <p class="font-bold text-lg">${m.label}</p>
                        <p class="text-sm text-gray-400">${m.time} Â· Quedan ${getTimeLeft(m.h)}</p>
                    </div>
                    <button onclick="completeMission(${m.id})" ${m.done?'disabled':''} 
                        class="px-5 py-2 rounded-xl font-bold text-sm transition ${m.done?'bg-green-600 cursor-not-allowed':'bg-blue-600 hover:bg-blue-700 active:scale-95'}">
                        ${m.done?'âœ“ Hecho':'Completar'}
                    </button>
                </div>
            `).join('')}
        </div>
    </div>
`;
```

}

function renderCloset(){
const cats={all:â€˜Todosâ€™,hat:â€˜Sombrerosâ€™,glasses:â€˜Lentesâ€™,accessory:â€˜Accesoriosâ€™,effect:â€˜Efectosâ€™,color:â€˜Coloresâ€™};

```
let allItems=[...DB];
if(state.unlockedColors.length>0){
    const unlockedColorItems=COLORS.filter(c=>state.unlockedColors.includes(c.i));
    allItems=[...allItems,...unlockedColorItems];
}

const filtered=state.filter==='all'?allItems:allItems.filter(i=>i.c===state.filter);
const owned=filtered.filter(i=>state.own.includes(i.i)||state.unlockedColors.includes(i.i));
const locked=filtered.filter(i=>!state.own.includes(i.i)&&!state.unlockedColors.includes(i.i));

return `
    <div class="mb-6">
        ${drawMolar()}
    </div>
    
    <div class="bg-gradient-to-r from-purple-900/40 to-blue-900/40 rounded-xl p-4 mb-4 text-center border border-purple-500/30">
        <p class="text-2xl font-bold text-purple-300">${state.own.length+state.unlockedColors.length}/${DB.length+COLORS.length}</p>
        <p class="text-sm">CosmÃ©ticos desbloqueados</p>
    </div>
    
    <div class="flex gap-2 mb-4 overflow-x-auto pb-2">
        ${Object.keys(cats).map(k=>`
            <button onclick="setFilter('${k}')" class="px-4 py-2 rounded-xl font-bold text-sm whitespace-nowrap transition ${state.filter===k?'bg-purple-600':'bg-gray-800 hover:bg-gray-700'}">
                ${cats[k]}
            </button>
        `).join('')}
    </div>
    
    ${owned.length>0?`
        <h3 class="text-lg font-bold text-green-400 mb-3">âœ“ Desbloqueados</h3>
        <div class="grid grid-cols-2 gap-3 mb-6">
            ${owned.map(item=>{
                const equipped=item.c==='color'?state.eq.color===item.i:state.eq[item.c]===item.i;
                return `
                    <div onclick="equipItem(${item.i})" class="card bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-4 text-center border-2 ${item.c==='color'?'border-purple-500':'r-'+item.r} ${equipped?'ring-4 ring-purple-500 bg-purple-900/30':''}">
                        ${item.c==='color'?
                            `<div class="w-16 h-16 mx-auto mb-3 rounded-full shadow-xl" style="background:${item.gradient}"></div>`:
                            `<div class="w-16 h-16 mx-auto mb-3 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg">
                                <span class="text-3xl">âœ¨</span>
                            </div>`
                        }
                        <p class="text-xs font-bold mb-1">${item.n}</p>
                        ${item.c!=='color'?`<div class="text-xs ${item.r==='legendary'?'text-yellow-400':item.r==='epic'?'text-purple-400':item.r==='rare'?'text-blue-400':'text-gray-400'} mb-2">
                            ${item.r.toUpperCase()}
                        </div>`:'<div class="text-xs text-purple-400 mb-2">SECRETO</div>'}
                        <div class="px-2 py-1 rounded-lg text-xs font-bold ${equipped?'bg-purple-600':'bg-gray-700'}">
                            ${equipped?'âœ“ Equipado':'Tocar para equipar'}
                        </div>
                    </div>
                `;
            }).join('')}
        </div>
    `:''}
    
    ${locked.length>0?`
        <h3 class="text-lg font-bold text-gray-500 mb-3">ğŸ”’ Bloqueados</h3>
        <div class="grid grid-cols-2 gap-3">
            ${locked.map(item=>`
                <div class="card bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-4 text-center border-2 ${item.c==='color'?'border-gray-600':'r-'+item.r} opacity-50 grayscale">
                    <div class="w-16 h-16 mx-auto mb-3 rounded-lg bg-gray-700 flex items-center justify-center shadow-lg">
                        <span class="text-3xl">ğŸ”’</span>
                    </div>
                    <p class="text-xs font-bold mb-1">???</p>
                    <div class="text-xs text-gray-400 mb-2">BLOQUEADO</div>
                    ${item.c!=='color'?`<div class="text-xs text-yellow-400 font-bold">â­ ${item.p} pts</div>`:'<div class="text-xs text-purple-400 font-bold">SECRETO</div>'}
                </div>
            `).join('')}
        </div>
    `:''}
`;
```

}

function renderShop(){
return `<h1 class="text-3xl font-bold mb-6 text-center">ğŸ›ï¸ Tienda de CosmÃ©ticos</h1> <div class="bg-gradient-to-r from-purple-900/40 to-blue-900/40 rounded-xl p-4 mb-6 text-center border border-purple-500/30"> <p class="text-lg font-bold text-purple-300">ğŸ’ ${DB.length} CosmÃ©ticos Disponibles</p> <p class="text-sm text-gray-300 mt-1">Colecciona todos los items</p> </div> <div class="grid grid-cols-2 gap-3"> ${DB.map(item=>{ const owned=state.own.includes(item.i); const canBuy=state.pts>=item.p; return`
<div class="card bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-4 text-center border-2 r-${item.r} shadow-lg ${owned?'opacity-60':''}">
<div class="text-xs font-bold mb-2 ${item.r==='legendary'?'text-yellow-400':item.r==='epic'?'text-purple-400':item.r==='rare'?'text-blue-400':'text-gray-400'}">
${item.r.toUpperCase()}
</div>
<div class="w-16 h-16 mx-auto mb-3 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg">
<span class="text-3xl">âœ¨</span>
</div>
<p class="text-xs font-bold mb-2">${item.n}</p>
<div class="flex items-center justify-center gap-1 mb-3 text-yellow-400 font-bold">
<span>â­</span>
<span>${item.p}</span>
</div>
${owned?
â€˜<button disabled class="w-full py-2 bg-green-600/50 rounded-lg text-xs font-bold cursor-not-allowed">âœ“ Comprado</button>â€™:
`<button onclick="buyItem(${item.i})" ${!canBuy?'disabled':''} class="w-full py-2 rounded-lg text-xs font-bold transition ${canBuy?'bg-blue-600 hover:bg-blue-700 active:scale-95':'bg-gray-600 cursor-not-allowed opacity-50'}">${canBuy?'Comprar':'Sin puntos'}</button>`
}
</div>
`; }).join('')} </div> `;
}

function render(){
const pages={home:renderHome,closet:renderCloset,shop:renderShop};
document.getElementById(â€˜appâ€™).innerHTML=pages[state.page]();
}

loadData();
changePage(â€˜homeâ€™);
</script>

</body>
</html>